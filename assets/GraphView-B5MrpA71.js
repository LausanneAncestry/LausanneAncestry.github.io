import{S as lt,r as Ft,b as It,i as Q,d as ft,e as Ot,f as ct,g as $t,h as Et,w as zt,j as U,k as Pt,c as _,a as P,F as Rt,o as J}from"./index-B-v3J5RN.js";function L(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function Vt(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function xt(t){let n,e,r;t.length!==2?(n=L,e=(l,f)=>L(t(l),f),r=(l,f)=>t(l)-f):(n=t===L||t===Vt?t:Ct,e=t,r=t);function i(l,f,u=0,g=l.length){if(u<g){if(n(f,f)!==0)return g;do{const c=u+g>>>1;e(l[c],f)<0?u=c+1:g=c}while(u<g)}return u}function o(l,f,u=0,g=l.length){if(u<g){if(n(f,f)!==0)return g;do{const c=u+g>>>1;e(l[c],f)<=0?u=c+1:g=c}while(u<g)}return u}function a(l,f,u=0,g=l.length){const c=i(l,f,u,g-1);return c>u&&r(l[c-1],f)>-r(l[c],f)?c-1:c}return{left:i,center:a,right:o}}function Ct(){return 0}function Yt(t){return t===null?NaN:+t}const Gt=xt(L),_t=Gt.right;xt(Yt).center;function Jt(t,n){let e=0,r,i=0,o=0;for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++e,o+=r*(a-i));if(e>1)return o/(e-1)}function Bt(t,n){const e=Jt(t);return e&&Math.sqrt(e)}class dt extends Map{constructor(n,e=Tt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(const[r,i]of n)this.set(r,i)}get(n){return super.get(ht(this,n))}has(n){return super.has(ht(this,n))}set(n,e){return super.set(Dt(this,n),e)}delete(n){return super.delete(Lt(this,n))}}function ht({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):e}function Dt({_intern:t,_key:n},e){const r=n(e);return t.has(r)?t.get(r):(t.set(r,e),e)}function Lt({_intern:t,_key:n},e){const r=n(e);return t.has(r)&&(e=t.get(r),t.delete(r)),e}function Tt(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Ht=Math.sqrt(50),Wt=Math.sqrt(10),Xt=Math.sqrt(2);function H(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Ht?10:o>=Wt?5:o>=Xt?2:1;let l,f,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(t*u),f=Math.round(n*u),l/u<t&&++l,f/u>n&&--f,u=-u):(u=Math.pow(10,i)*a,l=Math.round(t/u),f=Math.round(n/u),l*u<t&&++l,f*u>n&&--f),f<l&&.5<=e&&e<2?H(t,n,e*2):[l,f,u]}function qt(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,o,a]=r?H(n,t,e):H(t,n,e);if(!(o>=i))return[];const l=o-i+1,f=new Array(l);if(r)if(a<0)for(let u=0;u<l;++u)f[u]=(o-u)/-a;else for(let u=0;u<l;++u)f[u]=(o-u)*a;else if(a<0)for(let u=0;u<l;++u)f[u]=(i+u)/-a;else for(let u=0;u<l;++u)f[u]=(i+u)*a;return f}function tt(t,n,e){return n=+n,t=+t,e=+e,H(t,n,e)[2]}function Ut(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?tt(n,t,e):tt(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function Zt(t,n){let e=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++e,r+=i);if(e)return r/e}function Kt(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((n-t)/e))|0,o=new Array(i);++r<i;)o[r]=t+r*e;return o}function Qt(t){return t}var Z=1,K=2,nt=3,G=4,mt=1e-6;function tn(t){return"translate("+t+",0)"}function nn(t){return"translate(0,"+t+")"}function rn(t){return n=>+t(n)}function en(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function an(){return!this.__axis}function vt(t,n){var e=[],r=null,i=null,o=6,a=6,l=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Z||t===G?-1:1,g=t===G||t===K?"x":"y",c=t===Z||t===nt?tn:nn;function s(d){var m=r??(n.ticks?n.ticks.apply(n,e):n.domain()),N=i??(n.tickFormat?n.tickFormat.apply(n,e):Qt),A=Math.max(o,0)+l,S=n.range(),w=+S[0]+f,p=+S[S.length-1]+f,b=(n.bandwidth?en:rn)(n.copy(),f),M=d.selection?d.selection():d,F=M.selectAll(".domain").data([null]),x=M.selectAll(".tick").data(m,n).order(),O=x.exit(),R=x.enter().append("g").attr("class","tick"),$=x.select("line"),h=x.select("text");F=F.merge(F.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(R),$=$.merge(R.append("line").attr("stroke","currentColor").attr(g+"2",u*o)),h=h.merge(R.append("text").attr("fill","currentColor").attr(g,u*A).attr("dy",t===Z?"0em":t===nt?"0.71em":"0.32em")),d!==M&&(F=F.transition(d),x=x.transition(d),$=$.transition(d),h=h.transition(d),O=O.transition(d).attr("opacity",mt).attr("transform",function(v){return isFinite(v=b(v))?c(v+f):this.getAttribute("transform")}),R.attr("opacity",mt).attr("transform",function(v){var j=this.parentNode.__axis;return c((j&&isFinite(j=j(v))?j:b(v))+f)})),O.remove(),F.attr("d",t===G||t===K?a?"M"+u*a+","+w+"H"+f+"V"+p+"H"+u*a:"M"+f+","+w+"V"+p:a?"M"+w+","+u*a+"V"+f+"H"+p+"V"+u*a:"M"+w+","+f+"H"+p),x.attr("opacity",1).attr("transform",function(v){return c(b(v)+f)}),$.attr(g+"2",u*o),h.attr(g,u*A).text(N),M.filter(an).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===K?"start":t===G?"end":"middle"),M.each(function(){this.__axis=b})}return s.scale=function(d){return arguments.length?(n=d,s):n},s.ticks=function(){return e=Array.from(arguments),s},s.tickArguments=function(d){return arguments.length?(e=d==null?[]:Array.from(d),s):e.slice()},s.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),s):r&&r.slice()},s.tickFormat=function(d){return arguments.length?(i=d,s):i},s.tickSize=function(d){return arguments.length?(o=a=+d,s):o},s.tickSizeInner=function(d){return arguments.length?(o=+d,s):o},s.tickSizeOuter=function(d){return arguments.length?(a=+d,s):a},s.tickPadding=function(d){return arguments.length?(l=+d,s):l},s.offset=function(d){return arguments.length?(f=+d,s):f},s}function on(t){return vt(nt,t)}function un(t){return vt(G,t)}function B(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],Ft)}function sn(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(o){for(i=0;i<e;++i)r[i]=t[i]*(1-o)+n[i]*o;return r}}function ln(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fn(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),o=new Array(e),a;for(a=0;a<r;++a)i[a]=it(t[a],n[a]);for(;a<e;++a)o[a]=n[a];return function(l){for(a=0;a<r;++a)o[a]=i[a](l);return o}}function cn(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function dn(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=it(t[i],n[i]):r[i]=n[i];return function(o){for(i in e)r[i]=e[i](o);return r}}function it(t,n){var e=typeof n,r;return n==null||e==="boolean"?It(n):(e==="number"?Q:e==="string"?(r=ct(n))?(n=r,ft):Ot:n instanceof ct?ft:n instanceof Date?cn:ln(n)?sn:Array.isArray(n)?fn:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?dn:Q)(t,n)}function hn(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}function mn(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function W(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function C(t){return t=W(Math.abs(t)),t?t[1]:NaN}function gn(t,n){return function(e,r){for(var i=e.length,o=[],a=0,l=t[0],f=0;i>0&&l>0&&(f+l+1>r&&(l=Math.max(1,r-f)),o.push(e.substring(i-=l,i+l)),!((f+=l+1)>r));)l=t[a=(a+1)%t.length];return o.reverse().join(n)}}function pn(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var yn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function X(t){if(!(n=yn.exec(t)))throw new Error("invalid format: "+t);var n;return new at({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}X.prototype=at.prototype;function at(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}at.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Mn(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var jt;function wn(t,n){var e=W(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(jt=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+W(t,Math.max(0,n+o-1))[0]}function gt(t,n){var e=W(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const pt={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:mn,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>gt(t*100,n),r:gt,s:wn,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function yt(t){return t}var Mt=Array.prototype.map,wt=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function kn(t){var n=t.grouping===void 0||t.thousands===void 0?yt:gn(Mt.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?yt:pn(Mt.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function u(c){c=X(c);var s=c.fill,d=c.align,m=c.sign,N=c.symbol,A=c.zero,S=c.width,w=c.comma,p=c.precision,b=c.trim,M=c.type;M==="n"?(w=!0,M="g"):pt[M]||(p===void 0&&(p=12),b=!0,M="g"),(A||s==="0"&&d==="=")&&(A=!0,s="0",d="=");var F=N==="$"?e:N==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",x=N==="$"?r:/[%p]/.test(M)?a:"",O=pt[M],R=/[defgprs%]/.test(M);p=p===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function $(h){var v=F,j=x,E,Y,y;if(M==="c")j=O(h)+j,h="";else{h=+h;var I=h<0||1/h<0;if(h=isNaN(h)?f:O(Math.abs(h),p),b&&(h=Mn(h)),I&&+h==0&&m!=="+"&&(I=!1),v=(I?m==="("?m:l:m==="-"||m==="("?"":m)+v,j=(M==="s"?wt[8+jt/3]:"")+j+(I&&m==="("?")":""),R){for(E=-1,Y=h.length;++E<Y;)if(y=h.charCodeAt(E),48>y||y>57){j=(y===46?i+h.slice(E+1):h.slice(E))+j,h=h.slice(0,E);break}}}w&&!A&&(h=n(h,1/0));var z=v.length+h.length+j.length,k=z<S?new Array(S-z+1).join(s):"";switch(w&&A&&(h=n(k+h,k.length?S-j.length:1/0),k=""),d){case"<":h=v+h+j+k;break;case"=":h=v+k+h+j;break;case"^":h=k.slice(0,z=k.length>>1)+v+h+j+k.slice(z);break;default:h=k+v+h+j;break}return o(h)}return $.toString=function(){return c+""},$}function g(c,s){var d=u((c=X(c),c.type="f",c)),m=Math.max(-8,Math.min(8,Math.floor(C(s)/3)))*3,N=Math.pow(10,-m),A=wt[8+m/3];return function(S){return d(N*S)+A}}return{format:u,formatPrefix:g}}var D,ot,At;bn({thousands:",",grouping:[3],currency:["$",""]});function bn(t){return D=kn(t),ot=D.format,At=D.formatPrefix,D}function xn(t){return Math.max(0,-C(Math.abs(t)))}function vn(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(C(n)/3)))*3-C(Math.abs(t)))}function jn(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,C(n)-C(t))+1}function ut(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}const kt=Symbol("implicit");function st(){var t=new dt,n=[],e=[],r=kt;function i(o){let a=t.get(o);if(a===void 0){if(r!==kt)return r;t.set(o,a=n.push(o)-1)}return e[a%e.length]}return i.domain=function(o){if(!arguments.length)return n.slice();n=[],t=new dt;for(const a of o)t.has(a)||t.set(a,n.push(a)-1);return i},i.range=function(o){return arguments.length?(e=Array.from(o),i):e.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return st(n,e).unknown(r)},ut.apply(i,arguments),i}function Nt(){var t=st().unknown(void 0),n=t.domain,e=t.range,r=0,i=1,o,a,l=!1,f=0,u=0,g=.5;delete t.unknown;function c(){var s=n().length,d=i<r,m=d?i:r,N=d?r:i;o=(N-m)/Math.max(1,s-f+u*2),l&&(o=Math.floor(o)),m+=(N-m-o*(s-f))*g,a=o*(1-f),l&&(m=Math.round(m),a=Math.round(a));var A=Kt(s).map(function(S){return m+o*S});return e(d?A.reverse():A)}return t.domain=function(s){return arguments.length?(n(s),c()):n()},t.range=function(s){return arguments.length?([r,i]=s,r=+r,i=+i,c()):[r,i]},t.rangeRound=function(s){return[r,i]=s,r=+r,i=+i,l=!0,c()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(s){return arguments.length?(l=!!s,c()):l},t.padding=function(s){return arguments.length?(f=Math.min(1,u=+s),c()):f},t.paddingInner=function(s){return arguments.length?(f=Math.min(1,s),c()):f},t.paddingOuter=function(s){return arguments.length?(u=+s,c()):u},t.align=function(s){return arguments.length?(g=Math.max(0,Math.min(1,s)),c()):g},t.copy=function(){return Nt(n(),[r,i]).round(l).paddingInner(f).paddingOuter(u).align(g)},ut.apply(c(),arguments)}function St(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return St(n())},t}function An(){return St(Nt.apply(null,arguments).paddingInner(1))}function Nn(t){return function(){return t}}function Sn(t){return+t}var bt=[0,1];function V(t){return t}function rt(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:Nn(isNaN(n)?NaN:.5)}function Fn(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function In(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=rt(i,r),o=e(a,o)):(r=rt(r,i),o=e(o,a)),function(l){return o(r(l))}}function On(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++a<r;)i[a]=rt(t[a],t[a+1]),o[a]=e(n[a],n[a+1]);return function(l){var f=_t(t,l,1,r)-1;return o[f](i[f](l))}}function $n(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function En(){var t=bt,n=bt,e=it,r,i,o,a=V,l,f,u;function g(){var s=Math.min(t.length,n.length);return a!==V&&(a=Fn(t[0],t[s-1])),l=s>2?On:In,f=u=null,c}function c(s){return s==null||isNaN(s=+s)?o:(f||(f=l(t.map(r),n,e)))(r(a(s)))}return c.invert=function(s){return a(i((u||(u=l(n,t.map(r),Q)))(s)))},c.domain=function(s){return arguments.length?(t=Array.from(s,Sn),g()):t.slice()},c.range=function(s){return arguments.length?(n=Array.from(s),g()):n.slice()},c.rangeRound=function(s){return n=Array.from(s),e=hn,g()},c.clamp=function(s){return arguments.length?(a=s?!0:V,g()):a!==V},c.interpolate=function(s){return arguments.length?(e=s,g()):e},c.unknown=function(s){return arguments.length?(o=s,c):o},function(s,d){return r=s,i=d,g()}}function zn(){return En()(V,V)}function Pn(t,n,e,r){var i=Ut(t,n,e),o;switch(r=X(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(o=vn(i,a))&&(r.precision=o),At(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=jn(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=xn(i))&&(r.precision=o-(r.type==="%")*2);break}}return ot(r)}function Rn(t){var n=t.domain;return t.ticks=function(e){var r=n();return qt(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return Pn(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,o=r.length-1,a=r[i],l=r[o],f,u,g=10;for(l<a&&(u=a,a=l,l=u,u=i,i=o,o=u);g-- >0;){if(u=tt(a,l,e),u===f)return r[i]=a,r[o]=l,n(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;f=u}return t},t}function et(){var t=zn();return t.copy=function(){return $n(t,et())},ut.apply(t,arguments),Rn(t)}const Vn={class:"chart-container"},Cn={class:"chart-container"},Yn={class:"chart-container"};var T=(t=>(t.HIGHER="higher",t.IDENTICAL="identical",t.LOWER="lower",t))(T||{});const _n=$t({__name:"GraphView",setup(t){const n=Pt("data");if(!n)throw new Error("data not provided");Et(()=>{f()}),zt(n,()=>{f()});const e=["-1","10019"];function r(c){return c=="lower"?-1:c=="identical"?0:1}const i=U(null),o=U(null),a=U(null);let l;function f(){if(!n)throw new Error("data not provided");const c=n.value.persons,s=n.value.jobs;l=Object.fromEntries(Object.values(c).map(d=>[d.id,d.withJobsMetadata(s)])),u(Object.values(l),i,"hierarchy",(d,m)=>d==="boss"&&m==="worker"?"higher":d==="worker"&&m==="boss"?"lower":"identical"),u(Object.values(l),o,"training duration",(d,m)=>d==="high"&&m!=="high"||d==="medium"&&m==="low"?"higher":d==="low"&&m!=="low"||d==="medium"&&m==="high"?"lower":"identical"),u(Object.values(l),a,"physicality",(d,m)=>d==="high"&&m!=="high"||d==="medium"&&m==="low"?"higher":d==="low"&&m!=="low"||d==="medium"&&m==="high"?"lower":"identical")}function u(c,s,d,m){const N=new Set,A=Object.fromEntries(c.map(p=>{p.person.censusYears.forEach(x=>N.add(x));const b=p.jobsMetadata;let M=b[0].metadata[d],F=b[0].id;for(let x=1;x<b.length;x++)m(b[x].metadata[d],M)=="higher"&&(M=b[x].metadata[d],F=b[x].id);return[p.person.id,{...p,maxFeatureValue:M,maxFeatureJobId:F}]}));function S(p){if(!p.person.parentId)return!1;const b=A[p.person.parentId];return p.person.parentId!==null&&p.maxFeatureValue&&!e.includes(p.maxFeatureJobId)&&b.maxFeatureValue&&!e.includes(b.maxFeatureJobId)}const w=Object.entries(A).filter(([,p])=>S(p)).map(([,p])=>({person:p.person,firstYear:Math.min(...p.person.censusYears),featureCategoryName:m(p.maxFeatureValue,A[p.person.parentId].maxFeatureValue),jobsMetadata:p.jobsMetadata}));g(w,d,Array.from(N).sort(),s)}function g(c,s,d,m){var Y;const N=(Y=m.value)==null?void 0:Y.parentElement;if(!N)return;const A=N.clientWidth,S=450,w={top:40,right:40,bottom:60,left:220},p=A-w.left-w.right,b=S-w.top-w.bottom,M=et().domain([1800,1900]).range([0,p]),F=An().domain(Object.values(T)).range([0,b]).padding(.5),x=B(m.value).attr("viewBox",`0 0 ${p+w.left+w.right} ${b+w.top+w.bottom}`).attr("preserveAspectRatio","xMidYMid meet");x.selectAll("*").remove();const O=x.append("g").attr("transform",`translate(${w.left},${w.top})`);O.append("g").attr("transform",`translate(0,${b})`).call(on(M).tickValues(d).tickFormat(ot("d"))),O.append("g").call(un(F)),x.append("text").attr("x",w.left+p/2).attr("y",b+w.top+45).attr("text-anchor","middle").attr("font-size",14).attr("font-weight","bold").text("Year"),x.append("text").attr("x",w.left-160).attr("y",w.top+b/2).attr("text-anchor","middle").attr("transform",`rotate(-90,${w.left-160},${w.top+b/2})`).attr("font-size",14).attr("font-weight","bold").text(`${s} relative to 1st generation`);function R(){return(Math.random()-.5)*30}function $(){return(Math.random()-.5)*30}const h=st().domain(Object.values(T)).range(["#2ca02c","#1f77b4","#d62728"]),v=B("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background","#fff").style("border","1px solid #bbb").style("padding","6px 12px").style("border-radius","6px").style("pointer-events","none").style("font-size","13px").style("color","#222").style("box-shadow","2px 2px 8px #ccc");O.selectAll(".person").data(c).enter().append("circle").attr("class","person").attr("cx",y=>M(y.firstYear)+$()).attr("cy",y=>F(y.featureCategoryName)+R()).attr("r",4).attr("fill",y=>h(y.featureCategoryName)).attr("stroke","#333").attr("stroke-width",1.5).style("cursor","pointer").on("mouseover",function(y,I){const z=l[I.person.parentId].jobsMetadata;v.transition().duration(150).style("opacity",1),v.html(`<strong>Job:</strong> ${I.jobsMetadata.map(k=>k.job).filter(k=>k!=="").join(", ")} (${I.jobsMetadata.map(k=>k.metadata[s]).filter(k=>k!=="").join(", ")})<br>
        <strong>Parent's job:</strong> ${z.map(k=>k.job).filter(k=>k!=="").join(", ")} (${z.map(k=>k.metadata[s]).filter(k=>k!=="").join(", ")})`).style("left",y.pageX+18+"px").style("top",y.pageY-28+"px"),B(this).attr("stroke-width",3)}).on("mousemove",function(y){v.style("left",y.pageX+18+"px").style("top",y.pageY-28+"px")}).on("mouseout",function(){v.transition().duration(200).style("opacity",0),B(this).attr("stroke-width",1.5)});function j(y){return et().domain([1,0,-1]).range(Object.values(T).map(I=>F(I)))(y)}const E=d.map(y=>{const I=c.filter(q=>q.firstYear===y).map(q=>r(q.featureCategoryName)),z=I.length?Zt(I)??0:0,k=I.length?Bt(I)??0:0;return{year:y,mean:z,std:k}});O.selectAll(".error-bar").data(E).enter().append("line").attr("class","error-bar").attr("x1",y=>M(y.year)).attr("x2",y=>M(y.year)).attr("y1",y=>j(y.mean-y.std)).attr("y2",y=>j(y.mean+y.std)).attr("stroke","#222").attr("stroke-width",2),O.selectAll(".mean-dot").data(E).enter().append("circle").attr("class","mean-dot").attr("cx",y=>M(y.year)).attr("cy",y=>j(y.mean)).attr("r",6).attr("fill","#222")}return(c,s)=>(J(),_(Rt,null,[P("div",Vn,[s[0]||(s[0]=P("h2",{class:"chart-title"}," Professional Responsibilities ",-1)),s[1]||(s[1]=P("h3",{class:"chart-subtitle"}," of the 2nd Generation relative to those of the 1st Generation ",-1)),(J(),_("svg",{class:"chart",ref_key:"respSvgRef",ref:i},null,512))]),P("div",Cn,[s[2]||(s[2]=P("h2",{class:"chart-title"}," Training Duration ",-1)),s[3]||(s[3]=P("h3",{class:"chart-subtitle"}," of the 2nd Generation relative to those of the 1st Generation ",-1)),(J(),_("svg",{class:"chart",ref_key:"trainSvgRef",ref:o},null,512))]),P("div",Yn,[s[4]||(s[4]=P("h2",{class:"chart-title"}," Job Physicality ",-1)),s[5]||(s[5]=P("h3",{class:"chart-subtitle"}," of the 2nd Generation relative to those of the 1st Generation ",-1)),(J(),_("svg",{class:"chart",ref_key:"physSvgRef",ref:a},null,512))])],64))}});export{_n as default};
